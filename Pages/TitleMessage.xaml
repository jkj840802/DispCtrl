<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="DispCtrl.TitleMessagePage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="전광판 제목 수정"
    Background="{DynamicResource PageBackgroundBrush}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="18" Background="{DynamicResource PageBackgroundBrush}">

            <!-- 입력 안내 -->
            <Label
                Text="전광판에 표시할 제목을 입력하세요"
                FontSize="18"
                HorizontalOptions="Start" />

            <!-- 1) 메시지 입력란 -->
            <StackLayout Orientation="Horizontal" Spacing="12">
                <Label Text="제목:" VerticalOptions="Center" />

                <!-- Entry + 밑줄 + 단위 표시를 묶은 Grid -->
                <Grid RowDefinitions="Auto,1,Auto" WidthRequest="200">
                    <!-- Entry -->
                    <Entry x:Name="TitleTextEntry"
                           Grid.Row="0"
                           Placeholder="최대 12자"
                           TextChanged="OnTitleEntryTextChanged"
                           Unfocused="OnTitleEntryUnfocused">

                           <Entry.TextColor>
                               <AppThemeBinding Light="Black" Dark="White" />
                           </Entry.TextColor>
                           <Entry.PlaceholderColor>
                               <AppThemeBinding Light="#A9A9A9" Dark="#CCCCCC"/>
                           </Entry.PlaceholderColor>
                    </Entry>

                    <!-- 단위 수 표시 -->
                    <Label x:Name="TitleMessageUnitLabel"
                           Grid.Row="2"
                           Text="0 / 12"
                           FontSize="12"
                           HorizontalOptions="End"
                           Margin="0,-32,0,0" />
                </Grid>
            </StackLayout>

            <!-- 2) 색상 선택 콤보박스 -->
            <StackLayout Orientation="Horizontal" Spacing="12">
                <Label Text="색상:" VerticalOptions="Center" />

                <Grid WidthRequest="150" HeightRequest="40">
                    <Entry x:Name="TitleColorEntry"
                           Text="색상 선택"
                           TextColor="#A9A9A9"
                           FontSize="14"
                           VerticalOptions="Center"
                           IsReadOnly="True"
                           Background="{DynamicResource PageBackgroundBrush}"
                           HeightRequest="40" />

                    <Picker x:Name="TitleColorPicker"
                                    IsVisible="False" 
                                    SelectedIndexChanged="TitleColorPicker_SelectedIndexChanged"
                                    HeightRequest="40">
                        <Picker.ItemsSource>
                            <x:Array Type="{x:Type x:String}">
                                <x:String>빨강색</x:String>
                                <x:String>초록색</x:String>
                                <x:String>노랑색</x:String>
                                <x:String>파랑색</x:String>
                                <x:String>자주색</x:String>
                                <x:String>청록색</x:String>
                                <x:String>흰색</x:String>
                            </x:Array>
                        </Picker.ItemsSource>
                    </Picker>

                    <Button BackgroundColor="Transparent" Clicked="TitleColorPickerButton_Clicked" />
                </Grid>
            </StackLayout>

            <!-- 3) 전송 버튼 -->
            <Button Text="전송"
                    Clicked="OnTitleSendClicked"
                    BackgroundColor="#4CAF50"
                    TextColor="White"
                    Margin="0,20,0,0" />

            <!-- 4) 전송 후 상태 표시 -->
            <Label x:Name="TitleStatusLabel"
                   Text=" "
                   FontSize="16"
                   HorizontalOptions="Center" />

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
